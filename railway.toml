# Railway deployment configuration for F1 Telegram Bot
[build]
builder = "NIXPACKS"
startCommand = "gunicorn --bind :8080 --workers 1 --worker-class gthread --threads 4 --timeout 120 --keep-alive 5 --max-requests 1000 --max-requests-jitter 100 f1_bot:app"

[deploy]
startCommand = "gunicorn --bind :8080 --workers 1 --worker-class gthread --threads 4 --timeout 120 --keep-alive 5 --max-requests 1000 --max-requests-jitter 100 f1_bot:app"
healthcheck = "/health"
healthcheckTimeout = 30
healthcheckInterval = 30
healthcheckStartPeriod = 60

[env]
PORT = "8080"
TELEGRAM_BOT_TOKEN = { fromSecret = "TELEGRAM_BOT_TOKEN" }
PYTHON_VERSION = "3.11.0"
WORKER_CLASS = "gthread"
WORKERS = "1"
THREADS = "4"
TIMEOUT = "120"
MAX_REQUESTS = "1000"
MAX_REQUESTS_JITTER = "100"

[storage]
name = "f1-bot-storage"
mountPath = "/app/storage"